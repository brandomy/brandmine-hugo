{{ define "main" }}
<div class="container case-studies-list">
  <!-- Page Header -->
  <header class="page-header">
    <h1>{{ .Title }}</h1>
    {{ with .Params.description }}
      <p class="page-description">{{ . }}</p>
    {{ end }}
  </header>

  <!-- Filter Options (Future Enhancement) -->
  {{ if false }}
  <aside class="filters">
    <div class="filter-group">
      <label>Industry</label>
      <select>
        <option>All Industries</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Market</label>
      <select>
        <option>All Markets</option>
      </select>
    </div>
  </aside>
  {{ end }}

  <!-- Case Studies Grid -->
  <div class="case-studies-grid">
    {{ range .Pages }}
      <article class="case-study-card">
        <!-- Hero Image -->
        {{ $caseStudySlug := path.Base .File.Dir }}
        {{ with .Params.heroImage }}
          <div class="card-image">
            <a href="{{ $.Permalink }}">
              {{ partial "responsive-image.html" (dict
                "src" (printf "images/case-studies/%s/originals/%s" $caseStudySlug .)
                "alt" $.Title
                "sizes" "(min-width: 1200px) 400px, (min-width: 768px) 50vw, 100vw"
              ) }}
            </a>
          </div>
        {{ end }}

        <!-- Card Content -->
        <div class="card-content">
          <!-- Meta Info -->
          <div class="card-meta">
            {{ with .Params.industry }}
              <span class="meta-badge meta-badge--industry">{{ . }}</span>
            {{ end }}
            {{ with .Params.country }}
              <span class="meta-badge meta-badge--country">{{ . }}</span>
            {{ end }}
          </div>

          <!-- Title -->
          <h2 class="card-title">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          </h2>

          <!-- Summary -->
          {{ with .Params.summary }}
            <p class="card-summary">{{ . }}</p>
          {{ end }}

          <!-- Key Metrics Preview -->
          {{ with .Params.metrics }}
            {{ if ge (len .) 1 }}
              <div class="card-metrics">
                {{ range first 3 . }}
                  <div class="metric-preview">
                    <div class="metric-preview-label">{{ .label }}</div>
                    <div class="metric-preview-value">{{ .value }}</div>
                  </div>
                {{ end }}
              </div>
            {{ end }}
          {{ end }}

          <!-- Read More -->
          <a href="{{ .Permalink }}" class="card-link">
            Read Case Study
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 0l-1.5 1.5L11 6H0v2h11L6.5 12.5 8 14l7-7z"/>
            </svg>
          </a>
        </div>
      </article>
    {{ end }}
  </div>
</div>

<style>
.case-studies-list {
  padding: var(--space-8) 0;
}

.page-header {
  text-align: center;
  margin-bottom: var(--space-12);
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.page-header h1 {
  font-size: var(--text-5xl);
  color: var(--neutral-900);
  margin-bottom: var(--space-4);
}

.page-description {
  font-size: var(--text-xl);
  color: var(--neutral-600);
  line-height: var(--leading-relaxed);
}

/* Case Studies Grid */
.case-studies-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-8);
  margin-top: var(--space-10);
}

@media (min-width: 768px) {
  .case-studies-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1200px) {
  .case-studies-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Case Study Card */
.case-study-card {
  background: white;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-md);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  flex-direction: column;
}

.case-study-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-xl);
}

.card-image {
  width: 100%;
  height: 240px;
  overflow: hidden;
  background: var(--neutral-100);
}

.card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.case-study-card:hover .card-image img {
  transform: scale(1.05);
}

.card-content {
  padding: var(--space-6);
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}

.card-meta {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
  margin-bottom: var(--space-4);
}

.meta-badge {
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
  border-radius: var(--radius-full);
}

.meta-badge--industry {
  background: var(--primary-100);
  color: var(--primary-700);
}

.meta-badge--country {
  background: var(--neutral-100);
  color: var(--neutral-700);
}

.card-title {
  font-size: var(--text-xl);
  line-height: var(--leading-tight);
  margin-bottom: var(--space-3);
}

.card-title a {
  color: var(--neutral-900);
  text-decoration: none;
  transition: color 0.2s ease;
}

.card-title a:hover {
  color: var(--primary-600);
}

.card-summary {
  font-size: var(--text-sm);
  color: var(--neutral-600);
  line-height: var(--leading-relaxed);
  margin-bottom: var(--space-4);
  flex-grow: 1;
}

/* Metrics Preview */
.card-metrics {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--neutral-50);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-4);
}

.metric-preview {
  text-align: center;
}

.metric-preview-label {
  font-size: var(--text-xs);
  color: var(--neutral-600);
  margin-bottom: var(--space-1);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
}

.metric-preview-value {
  font-size: var(--text-lg);
  font-weight: var(--font-bold);
  color: var(--neutral-900);
}

/* Card Link */
.card-link {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  color: var(--primary-600);
  font-weight: var(--font-semibold);
  font-size: var(--text-sm);
  text-decoration: none;
  transition: gap 0.2s ease;
}

.card-link:hover {
  gap: var(--space-3);
}

.card-link svg {
  width: 16px;
  height: 16px;
}
</style>
{{ end }}
