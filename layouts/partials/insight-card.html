{{ $insightTypes := .Site.Data.insights.types }}
{{ $insightType := index $insightTypes .Params.insightType }}

<article class="insight-card" data-insight-type="{{ .Params.insightType }}">
  <a href="{{ .Permalink }}" class="insight-card-link">
    {{ with .Params.heroImage }}
      <div class="insight-card-image">
        <img src="{{ . | relURL }}" alt="{{ $.Title }}" loading="lazy">
      </div>
    {{ end }}

    <div class="insight-card-content">
      {{ with $insightType }}
        <div class="insight-category" style="background: {{ .colorHex }}; color: white;">
          {{ .title }}
        </div>
      {{ end }}

      <h3 class="insight-card-title">{{ .Title }}</h3>

      {{ with .Params.summary }}
        <p class="insight-card-summary">{{ . | truncate 140 }}</p>
      {{ end }}

      <div class="insight-card-meta">
        <span class="meta-date">{{ .Date.Format "Jan 2, 2006" }}</span>
        {{ with .Params.readTime }}
          <span class="meta-divider">â€¢</span>
          <span class="meta-read-time">{{ . }} min read</span>
        {{ end }}
      </div>

      <!-- Related Tags -->
      {{ if or .Params.markets .Params.sectors }}
        <div class="insight-tags">
          {{ range first 2 .Params.markets }}
            <span class="tag tag-market">{{ . | humanize }}</span>
          {{ end }}
          {{ range first 2 .Params.sectors }}
            <span class="tag tag-sector">{{ . | humanize }}</span>
          {{ end }}
        </div>
      {{ end }}
    </div>
  </a>
</article>

<style>
.insight-card {
  background: white;
  border: 1px solid var(--neutral-200);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
}

.insight-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-card-hover);
}

/* Color-coded hover based on insight type */
.insight-card[data-insight-type="brand-spotlight"]:hover {
  border-color: var(--secondary-500);
}

.insight-card[data-insight-type="founders-journey"]:hover {
  border-color: var(--accent-500);
}

.insight-card[data-insight-type="location-intelligence"]:hover {
  border-color: var(--sky-500);
}

.insight-card[data-insight-type="market-momentum"]:hover {
  border-color: var(--olive-500);
}

.insight-card-link {
  display: flex;
  flex-direction: column;
  height: 100%;
  text-decoration: none;
  color: inherit;
}

.insight-card-image {
  width: 100%;
  height: 220px;
  overflow: hidden;
  background: var(--neutral-100);
  flex-shrink: 0;
}

.insight-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.insight-card:hover .insight-card-image img {
  transform: scale(1.05);
}

.insight-card-content {
  padding: var(--space-6);
  display: flex;
  flex-direction: column;
  flex: 1;
}

.insight-category {
  display: inline-block;
  align-self: flex-start;
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-xs);
  font-weight: var(--font-bold);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
  border-radius: var(--radius-full);
  margin-bottom: var(--space-3);
}

.insight-card-title {
  font-size: var(--text-xl);
  font-weight: var(--font-bold);
  color: var(--neutral-900);
  line-height: var(--leading-tight);
  margin-bottom: var(--space-3);
}

.insight-card-summary {
  font-size: var(--text-sm);
  color: var(--neutral-600);
  line-height: var(--leading-relaxed);
  margin-bottom: var(--space-4);
  flex: 1;
}

.insight-card-meta {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-xs);
  color: var(--neutral-500);
  margin-bottom: var(--space-4);
}

.meta-divider {
  color: var(--neutral-400);
}

.insight-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  margin-top: auto;
}

.tag {
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  text-transform: capitalize;
}

.tag-market {
  background: var(--sky-100);
  color: var(--sky-800);
}

.tag-sector {
  background: var(--olive-100);
  color: var(--olive-800);
}
</style>
