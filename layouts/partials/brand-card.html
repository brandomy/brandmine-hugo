<article class="brand-card"
  data-brand-id="{{ .File.UniqueID }}"
  data-markets="{{ if .Params.markets }}{{ delimit .Params.markets "," }}{{ end }}"
  data-sectors="{{ if .Params.sectors }}{{ delimit .Params.sectors "," }}{{ end }}"
  data-attributes="{{ if .Params.attributes }}{{ delimit .Params.attributes "," }}{{ end }}"
  data-signals="{{ if .Params.signals }}{{ delimit .Params.signals "," }}{{ end }}">
  <a href="{{ .Permalink }}" class="brand-card-link">
    {{ $brandSlug := path.Base .File.Dir }}
    {{ $logoBase := printf "/images/brands/%s/%s-logo-color" $brandSlug $brandSlug }}

    {{ with .Params.heroImage }}
      <div class="brand-card-image">
        <img src="{{ . | relURL }}" alt="{{ $.Title }}" loading="lazy">
      </div>
    {{ else }}
      <div class="brand-card-image">
        <img src="/images/placeholders/brand-hero-800w.jpg" alt="{{ $.Title }}" loading="lazy">
      </div>
    {{ end }}

    <div class="brand-card-content">
      {{ with .Params.logo }}
        <img src="{{ . | relURL }}" alt="{{ $.Title }} logo" class="brand-card-logo" loading="lazy">
      {{ else }}
        <img src="/images/placeholders/brand-logo-800w.jpg" alt="{{ $.Title }}" class="brand-card-logo" loading="lazy">
      {{ end }}

      <h3 class="brand-card-title">{{ .Title }}</h3>

      {{ with .Params.description }}
        <p class="brand-card-description">{{ . | truncate 120 }}</p>
      {{ end }}

      <div class="brand-card-meta">
        {{ with .Params.headquarters }}
          <span class="meta-item">
            <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16" aria-hidden="true">
              <path d="M8 0a5 5 0 0 0-5 5c0 2.5 5 11 5 11s5-8.5 5-11a5 5 0 0 0-5-5zm0 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/>
            </svg>
            {{ .city }}
          </span>
        {{ end }}

        {{ with .Params.founded }}
          <span class="meta-item">{{ . }}</span>
        {{ end }}
      </div>

      <!-- Dimension Tags -->
      {{ if or .Params.markets .Params.sectors }}
        <div class="brand-card-tags">
          {{ range first 2 .Params.markets }}
            <span class="tag tag-market">{{ . | humanize }}</span>
          {{ end }}
          {{ range first 2 .Params.sectors }}
            <span class="tag tag-sector">{{ . | humanize }}</span>
          {{ end }}
        </div>
      {{ end }}
    </div>
  </a>
</article>

<style>
.brand-card {
  background: white;
  border: 1px solid var(--neutral-200);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: all 0.3s ease;
}

.brand-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-card-hover);
  border-color: var(--primary-400);
}

.brand-card-link {
  display: block;
  text-decoration: none;
  color: inherit;
}

.brand-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: var(--neutral-100);
}

.brand-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.brand-card:hover .brand-card-image img {
  transform: scale(1.05);
}

.brand-card-content {
  padding: var(--space-6);
}

.brand-card-logo {
  max-width: 100px;
  height: auto;
  margin-bottom: var(--space-3);
}

.brand-card-title {
  font-size: var(--text-xl);
  font-weight: var(--font-bold);
  color: var(--neutral-900);
  margin-bottom: var(--space-3);
}

.brand-card-description {
  font-size: var(--text-sm);
  color: var(--neutral-600);
  line-height: var(--leading-relaxed);
  margin-bottom: var(--space-4);
}

.brand-card-meta {
  display: flex;
  gap: var(--space-4);
  margin-bottom: var(--space-4);
  font-size: var(--text-sm);
  color: var(--neutral-600);
}

.meta-item {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.brand-card-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.tag {
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  text-transform: capitalize;
}

.tag-market {
  background: var(--sky-100);
  color: var(--sky-800);
}

.tag-sector {
  background: var(--olive-100);
  color: var(--olive-800);
}
</style>
